<!DOCTYPE html>
<html lang="uk">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä —ñ–∫–æ–Ω–æ–∫ PWA</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        max-width: 800px;
        margin: 50px auto;
        padding: 20px;
        text-align: center;
      }
      h1 {
        color: #2563eb;
      }
      button {
        background: #2563eb;
        color: white;
        border: none;
        padding: 15px 30px;
        font-size: 18px;
        border-radius: 8px;
        cursor: pointer;
        margin: 20px;
      }
      button:hover {
        background: #1d4ed8;
      }
      .preview {
        display: inline-block;
        margin: 10px;
        text-align: center;
      }
      .preview canvas {
        border: 1px solid #ccc;
        border-radius: 8px;
      }
      .status {
        margin-top: 20px;
        padding: 15px;
        background: #f0f9ff;
        border-radius: 8px;
        color: #0369a1;
      }
    </style>
  </head>
  <body>
    <h1>üìç –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä —ñ–∫–æ–Ω–æ–∫ –¥–ª—è City Assistant</h1>
    <p>–ù–∞—Ç–∏—Å–Ω–∏ –∫–Ω–æ–ø–∫—É —â–æ–± –∑–≥–µ–Ω–µ—Ä—É–≤–∞—Ç–∏ –≤—Å—ñ 8 —ñ–∫–æ–Ω–æ–∫ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ</p>

    <button onclick="generateIcons()">üé® –ó–≥–µ–Ω–µ—Ä—É–≤–∞—Ç–∏ —ñ–∫–æ–Ω–∫–∏</button>

    <div id="preview"></div>
    <div id="status"></div>

    <script>
      function generateIcons() {
        const status = document.getElementById("status");
        const preview = document.getElementById("preview");
        status.innerHTML = "<p>–ì–µ–Ω–µ—Ä–∞—Ü—ñ—è —ñ–∫–æ–Ω–æ–∫...</p>";
        preview.innerHTML = "";

        // –ó–≤–∏—á–∞–π–Ω—ñ —ñ–∫–æ–Ω–∫–∏
        const regularSizes = [72, 96, 144, 192, 384, 512];

        regularSizes.forEach((size, index) => {
          setTimeout(() => {
            const canvas = createIcon(size, false);

            // –ü–æ–∫–∞–∑–∞—Ç–∏ –ø—Ä–µ–≤—å—é
            const div = document.createElement("div");
            div.className = "preview";
            const small = document.createElement("canvas");
            small.width = 100;
            small.height = 100;
            const ctx = small.getContext("2d");
            ctx.drawImage(canvas, 0, 0, 100, 100);
            div.appendChild(small);
            div.innerHTML += `<br>${size}x${size}`;
            preview.appendChild(div);

            // –ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏
            downloadCanvas(canvas, `icon-${size}.png`);
          }, index * 300);
        });

        // Maskable —ñ–∫–æ–Ω–∫–∏
        const maskableSizes = [192, 512];

        maskableSizes.forEach((size, index) => {
          setTimeout(() => {
            const canvas = createIcon(size, true);

            // –ü–æ–∫–∞–∑–∞—Ç–∏ –ø—Ä–µ–≤—å—é
            const div = document.createElement("div");
            div.className = "preview";
            const small = document.createElement("canvas");
            small.width = 100;
            small.height = 100;
            const ctx = small.getContext("2d");
            ctx.drawImage(canvas, 0, 0, 100, 100);
            div.appendChild(small);
            div.innerHTML += `<br>${size}x${size} (maskable)`;
            preview.appendChild(div);

            // –ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏
            downloadCanvas(canvas, `icon-${size}-maskable.png`);
          }, (regularSizes.length + index) * 300);
        });

        setTimeout(() => {
          status.innerHTML = `
                    <p>‚úÖ <strong>–ì–æ—Ç–æ–≤–æ!</strong> –ó–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω–æ 8 —ñ–∫–æ–Ω–æ–∫</p>
                    <p>üìÇ –ü–µ—Ä–µ–º—ñ—Å—Ç–∏ —ó—Ö —É –ø–∞–ø–∫—É: <code>images/icons/</code></p>
                    <ol style="text-align: left; display: inline-block;">
                        <li>–í—ñ–¥–∫—Ä–∏–π –ø–∞–ø–∫—É Downloads (–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è)</li>
                        <li>–ó–Ω–∞–π–¥–∏ —Ñ–∞–π–ª–∏: icon-72.png, icon-96.png, ... icon-512-maskable.png</li>
                        <li>–ü–µ—Ä–µ—Ç—è–≥–Ω–∏ –≤—Å—ñ 8 —Ñ–∞–π–ª—ñ–≤ —É –ø–∞–ø–∫—É <code>images/icons/</code></li>
                        <li>–û–Ω–æ–≤–∏—Ç–∏ —Å–∞–π—Ç (Cmd+R)</li>
                    </ol>
                `;
        }, (regularSizes.length + maskableSizes.length) * 300 + 500);
      }

      function createIcon(size, isMaskable) {
        const canvas = document.createElement("canvas");
        canvas.width = size;
        canvas.height = size;
        const ctx = canvas.getContext("2d");

        // –§–æ–Ω (–≥—Ä–∞–¥—ñ—î–Ω—Ç —Å–∏–Ω—ñ–π)
        const gradient = ctx.createLinearGradient(0, 0, size, size);
        gradient.addColorStop(0, "#3b82f6");
        gradient.addColorStop(1, "#1d4ed8");
        ctx.fillStyle = gradient;
        ctx.fillRect(0, 0, size, size);

        // –Ü–∫–æ–Ω–∫–∞ (–ø—ñ–Ω)
        const iconSize = isMaskable ? size * 0.5 : size * 0.65;
        ctx.fillStyle = "white";
        ctx.font = `bold ${iconSize}px Arial`;
        ctx.textAlign = "center";
        ctx.textBaseline = "middle";
        ctx.fillText("üìç", size / 2, size / 2);

        // –î–æ–¥–∞—Ç–∏ —Ç—ñ–Ω—å –¥–ª—è –≥–ª–∏–±–∏–Ω–∏
        ctx.shadowColor = "rgba(0, 0, 0, 0.3)";
        ctx.shadowBlur = size * 0.05;
        ctx.shadowOffsetX = size * 0.01;
        ctx.shadowOffsetY = size * 0.01;

        return canvas;
      }

      function downloadCanvas(canvas, filename) {
        canvas.toBlob((blob) => {
          const url = URL.createObjectURL(blob);
          const a = document.createElement("a");
          a.href = url;
          a.download = filename;
          document.body.appendChild(a);
          a.click();
          document.body.removeChild(a);
          URL.revokeObjectURL(url);
        }, "image/png");
      }
    </script>
  </body>
</html>
