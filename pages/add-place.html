<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="theme-color" content="#2563eb" />
    <title>Add Place - City Assistant</title>

    <link rel="manifest" href="../manifest.webmanifest" />
    <link rel="icon" type="image/png" href="../images/icons/icon-192.png" />
    <link rel="stylesheet" href="../css/styles.css" />
  </head>

  <body data-page="add">
    <header class="header">
      <div class="container header-content">
        <a href="../index.html" class="back-button">‚Üê Back</a>
        <h1 class="header-title">Add Place</h1>

        <div id="online-status" class="online-status">
          <span class="status-dot status-online"></span>
          <span class="status-text">Online</span>
        </div>
      </div>
    </header>

    <div id="offline-banner" class="offline-banner hidden">
      <div class="container">
        <p>‚ö†Ô∏è You're offline. App is running in limited mode.</p>
      </div>
    </div>

    <main class="main">
      <div class="container">
        <form id="add-place-form" class="form">
          <div class="form-group">
            <label class="form-label" for="place-name">Place Name <span class="required">*</span></label>
            <input id="place-name" class="form-input" type="text" required minlength="3" maxlength="100" placeholder="e.g., Opera House"/>
          </div>

          <div class="form-group">
            <label class="form-label" for="place-address">Address <span class="required">*</span></label>
            <input id="place-address" class="form-input" type="text" required minlength="5" maxlength="200" placeholder="e.g., 50 Main Street"/>
          </div>

          <div class="form-group">
            <label class="form-label" for="place-notes">Notes (optional)</label>
            <textarea id="place-notes" class="form-textarea" rows="4" maxlength="500" placeholder="Add notes..."></textarea>
            <span class="form-hint">Maximum 500 characters</span>
          </div>

          <div class="form-group">
            <label class="form-label">Geolocation</label>
            <button type="button" id="get-location-btn" class="button button-secondary">üìç Get My Location</button>

            <div id="coordinates-display" class="coordinates-box hidden">
              <p class="coordinates-text">üìç <span id="coordinates-value"></span></p>

              <!-- ‚úÖ Proper anchor -->
              <a id="preview-on-map" class="button button-outline mt-md" target="_blank" rel="noopener" href="#" hidden>
                üó∫Ô∏è View on Google Maps
              </a>
            </div>
          </div>

          <div class="form-group">
            <label class="form-label">Place Photo</label>

            <div class="row-wrap">
              <button type="button" id="take-photo-btn" class="button button-secondary">üì∏ Take Photo</button>
              <button type="button" id="choose-photo-btn" class="button button-secondary">üñºÔ∏è Choose from Gallery</button>
            </div>

            <input type="file" id="photo-file-input" accept="image/*" style="display:none" />

            <div id="photo-preview" class="photo-preview hidden">
              <img id="photo-preview-img" src="" alt="Preview"/>
              <button type="button" id="remove-photo-btn" class="button-remove-photo">‚úï</button>
            </div>
          </div>

          <div class="form-actions">
            <button type="submit" class="button button-primary button-full">üíæ Save Place</button>
            <a href="../index.html" class="button button-outline button-full">Cancel</a>
          </div>
        </form>
      </div>
    </main>

    <div id="loading-overlay" class="loading-overlay hidden">
      <div class="loading-spinner"></div>
      <p>Saving...</p>
    </div>

    <script src="../js/db.js"></script>
    <script src="../js/utils.js"></script>
    <script src="../js/geolocation.js"></script>
    <script src="../js/camera.js"></script>
    <script src="../js/pages/addPlace.js"></script>
    <script src="../js/app.js"></script>
  </body>
</html>
