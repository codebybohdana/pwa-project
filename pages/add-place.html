<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="theme-color" content="#2563eb" />

    <title>Add Place - City Assistant</title>

    <link rel="manifest" href="../manifest.webmanifest" />
    <link rel="icon" type="image/png" href="../images/icons/icon-192.png" />
    <link rel="stylesheet" href="../css/styles.css" />
  </head>
  <body>
    <!-- Header -->
    <header class="header">
      <div class="container header-content">
        <a href="../index.html" class="back-button">‚Üê Back</a>
        <h1 class="header-title">Add Place</h1>
      </div>
    </header>

    <!-- Main Content -->
    <main class="main">
      <div class="container">
        <form id="add-place-form" class="form" aria-label="Add new place form">
          <!-- Place Name -->
          <div class="form-group">
            <label for="place-name" class="form-label">
              Place Name <span class="required">*</span>
            </label>
            <input
              type="text"
              id="place-name"
              class="form-input"
              placeholder="e.g., Opera House"
              required
              minlength="3"
              maxlength="100"
              aria-required="true"
              aria-describedby="place-name-hint"
            />
            <span id="place-name-hint" class="sr-only">Required field, minimum 3 characters</span>
          </div>

          <!-- Address -->
          <div class="form-group">
            <label for="place-address" class="form-label">
              Address <span class="required">*</span>
            </label>
            <input
              type="text"
              id="place-address"
              class="form-input"
              placeholder="e.g., 50 Main Street"
              required
              minlength="5"
              maxlength="200"
              aria-required="true"
              aria-describedby="place-address-hint"
            />
            <span id="place-address-hint" class="sr-only">Required field, minimum 5 characters</span>
          </div>

          <!-- Notes -->
          <div class="form-group">
            <label for="place-notes" class="form-label">
              Notes (optional)
            </label>
            <textarea
              id="place-notes"
              class="form-textarea"
              placeholder="Add your notes about this place..."
              rows="4"
              maxlength="500"
              aria-describedby="place-notes-hint"
            ></textarea>
            <span id="place-notes-hint" class="form-hint">Maximum 500 characters</span>
          </div>

          <!-- Geolocation -->
          <div class="form-group">
            <label class="form-label">Geolocation</label>
            <button
              type="button"
              id="get-location-btn"
              class="button button-secondary"
              aria-label="Get current location using GPS"
            >
              üìç Get My Location
            </button>

            <div id="coordinates-display" class="coordinates-box hidden">
              <p class="coordinates-text">
                üìç <span id="coordinates-value"></span>
              </p>
              <a
                id="preview-on-map"
                href="#"
                target="_blank"
                class="button button-outline"
                style="
                  margin-top: 12px;
                  font-size: 14px;
                  padding: 10px 16px;
                  display: none;
                "
              >
                üó∫Ô∏è View on Google Maps
              </a>
            </div>
          </div>

          <!-- Photo -->
          <div class="form-group">
            <label class="form-label">Place Photo</label>

            <div style="display: flex; gap: 12px; flex-wrap: wrap;">
              <button
                type="button"
                id="take-photo-btn"
                class="button button-secondary"
                style="flex: 1; min-width: 180px;"
                aria-label="Take a photo using camera"
              >
                üì∏ Take Photo
              </button>

              <button
                type="button"
                id="choose-photo-btn"
                class="button button-secondary"
                style="flex: 1; min-width: 180px;"
                aria-label="Choose photo from gallery"
              >
                üñºÔ∏è Choose from Gallery
              </button>
            </div>

            <input
              type="file"
              id="photo-file-input"
              accept="image/*"
              style="display: none;"
            />

            <div id="photo-preview" class="photo-preview hidden">
              <img id="photo-preview-img" src="" alt="Preview" loading="lazy" />
              <button
                type="button"
                id="remove-photo-btn"
                class="button-remove-photo"
                aria-label="Remove photo"
              >
                ‚úï
              </button>
            </div>
          </div>

          <!-- Buttons -->
          <div class="form-actions">
            <button type="submit" class="button button-primary button-full">
              üíæ Save Place
            </button>
            <a href="../index.html" class="button button-outline button-full">
              Cancel
            </a>
          </div>
        </form>
      </div>
    </main>

    <!-- Loading Overlay -->
    <div id="loading-overlay" class="loading-overlay hidden">
      <div class="loading-spinner"></div>
      <p>Saving...</p>
    </div>

    <!-- JavaScript -->
    <script src="../js/db.js"></script>
    <script src="../js/image-cache.js"></script>
    <script src="../js/camera.js"></script>
    <script src="../js/geolocation.js"></script>
    <script src="../js/utils.js"></script>
    <script src="../js/views/add-place.js"></script>
    <script src="../js/app.js"></script>
  </body>
</html>